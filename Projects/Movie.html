<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie App</title>
    <link rel="icon" type="image/png" href="m.png">
</head>
<body>
    <div class="container">
        <h1>FilmFinder</h1>
        <h2>Quick Access to Movies & Ratings</h2>
        <input type="text" id="search" placeholder="Search Movie Name">
        <button id="search-button"> &#128269; </button>
        <div id="results"></div>
    </div>

    <script>

        const searchBtn = document.getElementById("search-button");
        const Results = document.getElementById("results");

        searchBtn.addEventListener("click", async () => {

            const val = document.getElementById("search").value;

            const api = "db7752cf";

            const url = `https://www.omdbapi.com/?apikey=${api}&s=${val}`;

            const res = await fetch(url);  // will send a GET request to the API url you built, fetch(url) returns a promise, so the await will wait until the response is ready 
            const data = await res.json(); // takes the raw response and extracts the json data from it, JSON ALSO returns a promise, so await will be used obviously, and now the data holds the actual data as a usable JS object

            Results.innerHTML = "";

            if(data.Response === "True"){
                data.Search.forEach(async movie => {
                    const detailRes = await fetch(`https://www.omdbapi.com/?apikey=${api}&i=${movie.imdbID}`);
                    const details = await detailRes.json();

                    const frame = document.createElement("div");
                    frame.className = "frame";
                    frame.innerHTML = `
                    <img src="${details.Poster !== "N/A" ? details.Poster : 'https://via.placeholder.com/200'}" />
                    <h3>${details.Title}</h3>
                    <p><strong>Year:</strong> ${details.Year}</p>
                    <p><strong>Genre:</strong> ${details.Genre}</p>
                    <p><strong>IMDB:</strong> ${details.imdbRating}</p>
                    <p>${details.Plot.slice(0, 100)}...</p>
                    `;

                    Results.appendChild(frame);

                });
            } else {
                Results.innerHTML = "<p> Movie Not Found. Try Again.</p>"
            }

        });

    </script>

</body>
</html>